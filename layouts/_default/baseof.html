<!DOCTYPE html>
<html lang="{{ or site.Language.Lang "en" }}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ if .Title }}{{ .Title }} · {{ end }}{{ site.Title }}</title>
    {{ $css := resources.Get "css/site.css" | resources.Minify | resources.Fingerprint }}
    <link rel="preload" href="{{ $css.RelPermalink }}" as="style" />
    <link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}" />
    <meta name="color-scheme" content="light dark" />
  </head>
  <body>
    <header class="site-header container">
      <nav class="nav">
        <a class="brand" href="{{ "/" | relURL }}">{{ site.Title }}</a>
        <div class="spacer"></div>
        {{/* Top-level pages (no section) for simple nav */}}
        {{ range first 5 (where site.RegularPages "Section" "==" "") }}
          <a href="{{ .RelPermalink }}">{{ .Title }}</a>
        {{ end }}
        <a href="{{ "/posts/" | relURL }}">Posts</a>
        <button id="theme-toggle" class="btn btn-small" aria-label="Toggle theme">☾</button>
      </nav>
    </header>

    <main class="container" id="main">
      {{ block "main" . }}{{ end }}
    </main>

    <footer class="site-footer container">
      <p>
        © {{ now.Format "2006" }} {{ site.Title }} · Built with <a href="https://gohugo.io/">Hugo</a>
      </p>
    </footer>

    {{ $js := resources.Get "js/site.js" | resources.Minify | resources.Fingerprint }}
    <script src="{{ $js.RelPermalink }}" integrity="{{ $js.Data.Integrity }}" defer></script>
  </body>
  </html>
